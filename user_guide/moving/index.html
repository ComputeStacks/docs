<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="How to move an existing site to ComputeStacks."><link rel="shortcut icon" href=../../images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.4.0"><title>Migrate Existing Application</title><link rel=stylesheet href=../../assets/stylesheets/main.fe0cca5b.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content=#2196f3><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><style>
        .git-revision-date-localized-plugin-iso_date { display: none }
        @media print {
           .git-revision-date-localized-plugin-iso_date { display: inline } 
           .git-revision-date-localized-plugin-timeago { display: none } 
        }
        </style></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#how-to-migrate-an-existing-application class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title="ComputeStacks Documentation" class="md-header-nav__button md-logo" aria-label="ComputeStacks Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><defs><style>.fa-secondary{opacity:.4}</style></defs><path class=fa-secondary d="M96 0H32A32 32 0 0 0 0 32v64h128V32A32 32 0 0 0 96 0zM0 384h128V128H0zm0 96a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H0zm513.62-17.78L401.08 42.71l-60.26 16.14 112.35 418.8c.11.39.2.79.29 1.18l60.29-16.15c-.04-.15-.09-.3-.13-.46zM160 480a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H160zM256 0h-64a32 32 0 0 0-32 32v64h124.79l-8-29.65a23.94 23.94 0 0 1 11.17-27V32A32 32 0 0 0 256 0zm-96 384h128V128H160z"/><path class=fa-primary d="M0 416h128v-32H0zm0-288h128V96H0zm575.17 317.65L460.39 17.78a23.89 23.89 0 0 0-29.18-17h-.09L415.73 5a24 24 0 0 0-16.9 29.36l114.79 427.86a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.35zM160 416h128v-32H160zM338.39 49.78a23.89 23.89 0 0 0-29.18-17h-.09L293.73 37a24 24 0 0 0-16.9 29.36l8 29.65H160v32h128V108l103.62 386.22a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.33z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> ComputeStacks Documentation </span> <span class="md-header-nav__topic md-ellipsis"> Migrate Existing Application </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../admin_guide/ class=md-tabs__link> Admin guide </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> User guide </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="ComputeStacks Documentation" class="md-nav__button md-logo" aria-label="ComputeStacks Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><defs><style>.fa-secondary{opacity:.4}</style></defs><path class=fa-secondary d="M96 0H32A32 32 0 0 0 0 32v64h128V32A32 32 0 0 0 96 0zM0 384h128V128H0zm0 96a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H0zm513.62-17.78L401.08 42.71l-60.26 16.14 112.35 418.8c.11.39.2.79.29 1.18l60.29-16.15c-.04-.15-.09-.3-.13-.46zM160 480a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H160zM256 0h-64a32 32 0 0 0-32 32v64h124.79l-8-29.65a23.94 23.94 0 0 1 11.17-27V32A32 32 0 0 0 256 0zm-96 384h128V128H160z"/><path class=fa-primary d="M0 416h128v-32H0zm0-288h128V96H0zm575.17 317.65L460.39 17.78a23.89 23.89 0 0 0-29.18-17h-.09L415.73 5a24 24 0 0 0-16.9 29.36l114.79 427.86a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.35zM160 416h128v-32H160zM338.39 49.78a23.89 23.89 0 0 0-29.18-17h-.09L293.73 37a24 24 0 0 0-16.9 29.36l8 29.65H160v32h128V108l103.62 386.22a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.33z"/></svg> </a> ComputeStacks Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. title=Overview class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Admin guide <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Admin guide" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Admin guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/ title=Overview class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-2 type=checkbox id=nav-2-2> <label class=md-nav__link for=nav-2-2> Billing <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Billing data-md-level=2> <label class=md-nav__title for=nav-2-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Billing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/billing/ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_guide/billing/billing_plans/ title="Billing Plans" class=md-nav__link> Billing Plans </a> </li> <li class=md-nav__item> <a href=../../admin_guide/billing/integrations/ title="Invoicing & Payments" class=md-nav__link> Invoicing & Payments </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-3 type=checkbox id=nav-2-3> <label class=md-nav__link for=nav-2-3> Cluster management <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Cluster management" data-md-level=2> <label class=md-nav__title for=nav-2-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Cluster management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/change_region_name/ title="Rename Region" class=md-nav__link> Rename Region </a> </li> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/cs_database/ title="Controller Database" class=md-nav__link> Controller Database </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4> <label class=md-nav__link for=nav-2-4> Getting started <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Getting started" data-md-level=2> <label class=md-nav__title for=nav-2-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Getting started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/getting_started/architecture_overview/ title=Architecture class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../../admin_guide/getting_started/onprem-demo/ title="OnPrem Demo" class=md-nav__link> OnPrem Demo </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> Integrations <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Integrations data-md-level=2> <label class=md-nav__title for=nav-2-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/integrations/cpanel_plugin/ title=cPanel class=md-nav__link> cPanel </a> </li> <li class=md-nav__item> <a href=../../admin_guide/integrations/webhooks/ title=Webhooks class=md-nav__link> Webhooks </a> </li> <li class=md-nav__item> <a href=../../admin_guide/integrations/whmcs_plugin/ title=WHMCS class=md-nav__link> WHMCS </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3 checked> <label class=md-nav__link for=nav-3> User guide <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="User guide" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> User guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ title=Overview class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../backups/ title=Backups class=md-nav__link> Backups </a> </li> <li class=md-nav__item> <a href=../building-images/ title="Building Images" class=md-nav__link> Building Images </a> </li> <li class=md-nav__item> <a href=../clone-project/ title="Clone a project" class=md-nav__link> Clone a project </a> </li> <li class=md-nav__item> <a href=../cloudflare/ title=Cloudflare class=md-nav__link> Cloudflare </a> </li> <li class=md-nav__item> <a href=../developer-tools/ title="Developer Tools" class=md-nav__link> Developer Tools </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Migrate Existing Application <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Migrate Existing Application" class="md-nav__link md-nav__link--active"> Migrate Existing Application </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#traditional-containerized-application-deployment-process class=md-nav__link> Traditional containerized application deployment process. </a> </li> <li class=md-nav__item> <a href=#traditional-ftpsftp-setup class=md-nav__link> Traditional FTP/SFTP setup </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#survey-existing-application class=md-nav__link> Survey Existing Application </a> <nav class=md-nav aria-label="Survey Existing Application"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#identify-data-persistence-requirements class=md-nav__link> Identify Data Persistence Requirements </a> </li> <li class=md-nav__item> <a href=#required-services class=md-nav__link> Required Services </a> <nav class=md-nav aria-label="Required Services"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mail class=md-nav__link> Mail </a> </li> <li class=md-nav__item> <a href=#redis class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=#cron-jobs class=md-nav__link> Cron Jobs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#identify-configuration-strategy class=md-nav__link> Identify Configuration Strategy </a> <nav class=md-nav aria-label="Identify Configuration Strategy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-files class=md-nav__link> Configuration Files </a> </li> <li class=md-nav__item> <a href=#environmental-parameters class=md-nav__link> Environmental Parameters </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#launching-containers class=md-nav__link> Launching Containers </a> <nav class=md-nav aria-label="Launching Containers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mariadb-104 class=md-nav__link> MariaDB 10.4 </a> </li> <li class=md-nav__item> <a href=#php-openlitespeed class=md-nav__link> PHP &amp; OpenLiteSpeed </a> <nav class=md-nav aria-label="PHP & OpenLiteSpeed"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-container-to-link-to-other-required-containers class=md-nav__link> Configuring container to link to other required containers </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-8 type=checkbox id=nav-3-8> <label class=md-nav__link for=nav-3-8> Container images <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Container images" data-md-level=2> <label class=md-nav__title for=nav-3-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Container images </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../container_images/elastic-search/ title=ElasticSearch class=md-nav__link> ElasticSearch </a> </li> <li class=md-nav__item> <a href=../container_images/redis/ title=Redis class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=../container_images/whmcs/ title="WHMCS Image" class=md-nav__link> WHMCS Image </a> </li> <li class=md-nav__item> <a href=../container_images/wordpress/ title=Wordpress class=md-nav__link> Wordpress </a> </li> <li class=md-nav__item> <a href=../container_images/wordpress_apache/ title="Wordpress (Apache)" class=md-nav__link> Wordpress (Apache) </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> Overview </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#traditional-containerized-application-deployment-process class=md-nav__link> Traditional containerized application deployment process. </a> </li> <li class=md-nav__item> <a href=#traditional-ftpsftp-setup class=md-nav__link> Traditional FTP/SFTP setup </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#survey-existing-application class=md-nav__link> Survey Existing Application </a> <nav class=md-nav aria-label="Survey Existing Application"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#identify-data-persistence-requirements class=md-nav__link> Identify Data Persistence Requirements </a> </li> <li class=md-nav__item> <a href=#required-services class=md-nav__link> Required Services </a> <nav class=md-nav aria-label="Required Services"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mail class=md-nav__link> Mail </a> </li> <li class=md-nav__item> <a href=#redis class=md-nav__link> Redis </a> </li> <li class=md-nav__item> <a href=#cron-jobs class=md-nav__link> Cron Jobs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#identify-configuration-strategy class=md-nav__link> Identify Configuration Strategy </a> <nav class=md-nav aria-label="Identify Configuration Strategy"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-files class=md-nav__link> Configuration Files </a> </li> <li class=md-nav__item> <a href=#environmental-parameters class=md-nav__link> Environmental Parameters </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#launching-containers class=md-nav__link> Launching Containers </a> <nav class=md-nav aria-label="Launching Containers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mariadb-104 class=md-nav__link> MariaDB 10.4 </a> </li> <li class=md-nav__item> <a href=#php-openlitespeed class=md-nav__link> PHP &amp; OpenLiteSpeed </a> <nav class=md-nav aria-label="PHP & OpenLiteSpeed"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-container-to-link-to-other-required-containers class=md-nav__link> Configuring container to link to other required containers </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=how-to-migrate-an-existing-application>How to migrate an existing application<a class=headerlink href=#how-to-migrate-an-existing-application title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>When onboarding a new application to ComputeStacks, there are two directions you can go:</p> <h3 id=traditional-containerized-application-deployment-process>Traditional containerized application deployment process.<a class=headerlink href=#traditional-containerized-application-deployment-process title="Permanent link">&para;</a></h3> <p>This is typically used by developers, or users with container experience. The application will be packaged into the container itself and will not enable SFTP access to the container. This allows for versioned containers and integration with build pipelines (CI).</p> <h3 id=traditional-ftpsftp-setup>Traditional FTP/SFTP setup<a class=headerlink href=#traditional-ftpsftp-setup title="Permanent link">&para;</a></h3> <p>This would be the legacy web hosting model where the user will login using their FTP/SFTP application of choice.</p> <p>All of our current marketplace images (Wordpress, PHP, Magento, etc) follow this model. We have a standardized image without any application data stored in the container. You will upload their application to the volume using the SSH/SFTP container attached to their project.</p> <p>This guide will focus on #2: Migrating a custom application from a traditional hosting environment, while maintaining the SFTP access they&rsquo;re used to.</p> <p>Throughout this application, we will be using a demo php/mysql application as our example.</p> <h2 id=survey-existing-application>Survey Existing Application<a class=headerlink href=#survey-existing-application title="Permanent link">&para;</a></h2> <p>Our first step is to survey their existing application and determine which containers we will need, and if we need to build anything for their application. In general, our goal is to reuse existing images that we already have built, and make modifications using the existing tools (e.g. <code>htaccess</code>, <code>cron jobs</code>), rather than build a custom image that we then need to maintain.</p> <h3 id=identify-data-persistence-requirements>Identify Data Persistence Requirements<a class=headerlink href=#identify-data-persistence-requirements title="Permanent link">&para;</a></h3> <p>What kind of data is being stored, and where is being stored currently? If the application is expecting data to be persisted outside of a standard directory structure, we may need to build a custom image.</p> <p>With ComputeStacks, you can have as many volumes as you want. However, our backup system will backup each volume separately, so we recommend trying to keep each image to only a single volume to ensure a consistent backup. </p> <h3 id=required-services>Required Services<a class=headerlink href=#required-services title="Permanent link">&para;</a></h3> <p>Containers in general expect there to be only a single running process. If this application has multiple services running, then we may need to create custom images and break out each service into their own service. Here are some common examples of dependent services that we need to deploy.</p> <h4 id=mail>Mail<a class=headerlink href=#mail title="Permanent link">&para;</a></h4> <p>How does the application deal with mail? Many php applications rely on sendmail being available, however our container images do not directly support sending mail and many providers specifically block outbound mail from their platform. We recommend using a commercial service for sending mail. This provides a better experience for your users (better email deliverability), less support requests, and less work for your support team since they won&rsquo;t have to deal with outbound spam.</p> <p>Here are a few providers we recommend: <a href=https://postmarkapp.com target=_blank>Postmark</a>, <a href=https://sendgrid.com target=_blank>Sendgrid</a>, <a href=https://aws.amazon.com/ses target=_blank>AmazonSES</a>. You can optionally use an SMTP container like MailHog to process mail.</p> <h4 id=redis>Redis<a class=headerlink href=#redis title="Permanent link">&para;</a></h4> <p>Redis is very easy to add to your application with ComputeStacks, simply choose it from the store. One thing to note is that our image does not persist data, it is configured as an in-memory store only. If the application requires redis to persist data through restarts, you will want to create your own and add a volume to it. </p> <h4 id=cron-jobs>Cron Jobs<a class=headerlink href=#cron-jobs title="Permanent link">&para;</a></h4> <p>Our PHP images do run the cron daemon inside the same container. This makes it easy to migrate existing web applications over. When you SFTP or SSH into your container, you will see a file in the root of the volume called crontab. Add your cronjobs here and restart the container for them to be installed.</p> <div class="admonition tip"> <p>Inside of the container the full path will be <code>/var/www/html/crontab</code> and not <code>/home/sftpuser/apps/&lt;service-name&gt;/webroot/crontab</code>.</p> </div> <h3 id=identify-configuration-strategy>Identify Configuration Strategy<a class=headerlink href=#identify-configuration-strategy title="Permanent link">&para;</a></h3> <p>Each application will configuration differently, but they can generally be drilled down to two different strategies: Configuration Files, and Environmental Parameters. When migrating your application to ComputeStacks, review the configuration files and see how they expect configuration data to be passed to it. In our example, the developer is using Environmental Parameters stored in a <code>.env</code> file, so that is how we will proceed.</p> <h4 id=configuration-files>Configuration Files<a class=headerlink href=#configuration-files title="Permanent link">&para;</a></h4> <p>With configuration files, all the database parameters, session keys, etc., are stored in plain text files on the volume. This is how, for example, Wordpress manages their configuration.</p> <h4 id=environmental-parameters>Environmental Parameters<a class=headerlink href=#environmental-parameters title="Permanent link">&para;</a></h4> <p>With environmental parameters, the configuration files will reference the environment for the value. This is the preferred method of configuration because it means your application can easily be moved to a different environment, without having to modify any files.</p> <h2 id=launching-containers>Launching Containers<a class=headerlink href=#launching-containers title="Permanent link">&para;</a></h2> <p>For this example, create a new project with: MariaDB 10.4, PHP 7.3 with OpenLiteSpeed, Redis, and phpMyAdmin.</p> <h3 id=mariadb-104>MariaDB 10.4<a class=headerlink href=#mariadb-104 title="Permanent link">&para;</a></h3> <p>Once you launch the container, we will need to manually create the database and import their database backup. On the main project page that lists all the containers in your project, click login on the MariaDB container. This will provide you your link to phpMyAdmin and the root password. </p> <div class="admonition danger"> <p>I recommend matching the new database collation to the existing database you&rsquo;re importing. If you look at the database export and find one of the <code>CREATE TABLE</code> statements, you should see at the end the line <code>COLLATE=</code>. Try to match that in phpMyAdmin.</p> </div> <p>After creating the database, navigate to the <strong>Import</strong> tab and upload your database dump.</p> <h3 id=php-openlitespeed>PHP &amp; OpenLiteSpeed<a class=headerlink href=#php-openlitespeed title="Permanent link">&para;</a></h3> <p>Our PHP 7.3 container, which is powered by OpenLiteSpeed, comes with a great web administrator. We will use this to make final configuration changes to the container. However, first we need to upload our application. Using either SFTP or rsync, move the application to the volume. Below is an example using rsync to upload our application to our example container <code>jovial-poitras82</code>.</p> <div class="admonition abstract"> <p class=admonition-title>Importing data and setting up the webserver</p> <p>In this example we are using the ip <code>1.1.1.1</code> and port <code>29656</code>. <em>You need to change these to the values listed for your specific application in ComputeStacks!</em></p> <div class=highlight><pre><span></span><code><span class=c1># Step 1: is the clear out the sample application included in the container</span>
ssh -p <span class=m>29656</span> sftpuser@1.1.1.1
rm ~/apps/jovial-poitras82/webroot/html/default/index.php
rm ~/apps/jovial-poitras82/webroot/html/default/info.php
<span class=nb>exit</span>

<span class=c1># Step 2: is to rsync the files </span>
<span class=nb>cd</span> /path/to/my/app
rsync -e <span class=s1>&#39;ssh -p 29656&#39;</span> -aP . sftpuser@1.1.1.1:apps/jovial-poitras82/webroot/html/default/
</code></pre></div> </div> <div class="admonition abstract"> <p class=admonition-title>Reset File Permissions</p> <p>The third step is to reset file permissions. Regardless of how you got the files onto the server, most likely the folder/file permissions are incorrect and will result in a <code>403 FORBIDDEN</code> error page.</p> <div class=highlight><pre><span></span><code><span class=c1># Step 1: SSH back into the ssh container</span>
ssh -p <span class=m>29656</span> sftpuser@1.1.1.1

<span class=c1># Step 2: Navigate to the root of the application</span>
<span class=nb>cd</span> ~/apps/jovial-poitras82/webroot/html/default

<span class=c1># Step 3: Reset folder permissions</span>
find . -type d -exec chmod <span class=m>755</span> <span class=o>{}</span> <span class=se>\;</span>

<span class=c1># Step 4: Reset file permissions (Note: Depending on how many files you have, this can take several minutes)</span>
find . -type f -exec chmod <span class=m>644</span> <span class=o>{}</span> <span class=se>\;</span>

<span class=c1># Step 5: Review the application specific recommendations for file/folder permissions and adjust accordingly.</span>

<span class=c1># Step 6: Although not always required, if you still see 403 forbidden errors, you may need to restart the container.</span>
</code></pre></div> </div> <p>Once it&rsquo;s deployed, navigate to the main service page and locate the web administrator URL and password. The password will be labeled <strong>Litespeed Password</strong>, and the URL will be the one routed to port <code>7080</code>. Click that and login.</p> <p>The default configuration for our PHP 7.3 Litespeed image expects the application to live in /var/www/html/default, however symfony uses a different application structure where the index lives below the public/ directory, so we will need to adjust the default vhost.</p> <ol> <li>Login to the web administrator and navigate to Virtual Hosts and click on Default to view the default virtual host.</li> <li>Click the edit button in the top right corner of the first section (Base) to edit the section.</li> <li>Ensure that the Virtual Host Root is <code>/var/www/html/default</code>.</li> <li>Click the General tab and edit the first box (Also General). Set the Document Root to $VH_ROOT/public.</li> <li>Click the icon to save your changes.</li> <li>Now we need to reload the webserver. You can do this by restarting the container, or issuing a graceful restart in the web administrator.<ol> <li>Click the server name below the word &lsquo;OpenLiteSpeed&rsquo; in the upper left-hand corner.</li> <li>Choose graceful restart.</li> </ol> </li> </ol> <h4 id=configuring-container-to-link-to-other-required-containers>Configuring container to link to other required containers<a class=headerlink href=#configuring-container-to-link-to-other-required-containers title="Permanent link">&para;</a></h4> <p>As stated previously, we will be using environmental parameters to pass configuration data to our application.</p> <p>Back in the ComputeStacks interface, navigate to the service overview page, click on the gear icon and choose Environment. Here you will see a list of the existing environmental parameters, click the icon to add a new one.</p> <p>We will be creating the following environmental parameters for our service:</p> <ul> <li>DATABASE_URL<ul> <li>In our example, this is in the form: <code>mysql://username:password@ip-address/databasename</code>.</li> <li>Our username will be root, and the ip address will be the direct local IP of the mariadb container.</li> </ul> </li> <li>APP_SECRET</li> <li>APP_ENV</li> <li>MAILER_URL<ul> <li>In our example, this is in the form: <code>smtp://username:password@mailserver</code></li> </ul> </li> <li>MAILER_FROM</li> <li>MAILER_TEST</li> </ul> <p>After you have added all the environmental parameters, you will need to issue a <strong>rebuild</strong> of your container.</p> <p><img alt="Access Env Params" src=/images/content/container-service-environment-menu.png style="border: 1px solid #ccc;padding:5px;margin-bottom:25px;"> <img alt="Access Env Params Overview" src=/images/content/container-service-environment-overview.png style="border: 1px solid #ccc;padding:5px;"></p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2020-07-16T18:20:33+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-07-16</span> </small> </div> </article> </div> </div> </main> <!-- Override https://github.com/squidfunk/mkdocs-material/blob/master/material/partials/footer.html --> <script>
window.belcoConfig = {
  shopId: 'qMeM9TQt8D5dQSc3j'
};
</script> <script>!function(n,o){var e=window.belcoFunction||"Belco";window[e]||(window[e]=function(n){if(void 0===window[e][n])throw new Error("Unknown method");return window[e][n].apply(window[e],Array.prototype.slice.call(arguments,1))}),window[e]._q=[];for(var i=["init","sync","track","page","open","close","toggle","on","once","off","anonymousId","customer","reset","sendMessage"],t=function(n){return function(){var o=Array.prototype.slice.call(arguments);return o.unshift(n),window[e]._q.push(o),window[e]}},w=0;w<i.length;w++){var r=i[w];window[e][r]=t(r)}window[e].load=function(e){if(!n.getElementById("belco-js")){var i=n.createElement(o);i.async=!0,i.id="belco-js",i.type="text/javascript",i.src="//cdn.belco.io/v2/widget.js",i.onload=function(n){"function"==typeof e&&e(n)};var t=n.getElementsByTagName(o)[0];t.parentNode.insertBefore(i,t)}},window.belcoConfig&&window[e].load(function(){window[e]("init",window.belcoConfig)})}(document,"script");</script> </div> <script src=../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../assets/javascripts/bundle.b39636ac.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.min.js></script> <script src=https://cdnjs.cloudflare.com/ajax/libs/timeago.js/4.0.0-beta.2/timeago.locales.min.js></script> <script>
            var nodes = document.querySelectorAll('.timeago');
            var locale = nodes[0].getAttribute('locale');
            timeago.render(nodes, locale);
          </script> </body> </html>