<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Architecture Overview"><link rel="shortcut icon" href=../../images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-6.2.4"><title>Architecture - ComputeStacks Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.15aa0b43.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.75751829.min.css><meta name=theme-color content=#2094f3><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel=stylesheet href=../../css/timeago.css></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=blue data-md-color-accent=orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#architecture class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=../.. title="ComputeStacks Documentation" class="md-header-nav__button md-logo" aria-label="ComputeStacks Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><defs><style>.fa-secondary{opacity:.4}</style></defs><path class=fa-secondary d="M96 0H32A32 32 0 0 0 0 32v64h128V32A32 32 0 0 0 96 0zM0 384h128V128H0zm0 96a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H0zm513.62-17.78L401.08 42.71l-60.26 16.14 112.35 418.8c.11.39.2.79.29 1.18l60.29-16.15c-.04-.15-.09-.3-.13-.46zM160 480a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H160zM256 0h-64a32 32 0 0 0-32 32v64h124.79l-8-29.65a23.94 23.94 0 0 1 11.17-27V32A32 32 0 0 0 256 0zm-96 384h128V128H160z"/><path class=fa-primary d="M0 416h128v-32H0zm0-288h128V96H0zm575.17 317.65L460.39 17.78a23.89 23.89 0 0 0-29.18-17h-.09L415.73 5a24 24 0 0 0-16.9 29.36l114.79 427.86a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.35zM160 416h128v-32H160zM338.39 49.78a23.89 23.89 0 0 0-29.18-17h-.09L293.73 37a24 24 0 0 0-16.9 29.36l8 29.65H160v32h128V108l103.62 386.22a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.33z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <div class=md-header-nav__topic> <span class=md-ellipsis> ComputeStacks Documentation </span> </div> <div class=md-header-nav__topic> <span class=md-ellipsis> Architecture </span> </div> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../ class="md-tabs__link md-tabs__link--active"> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../admin_guide/ class=md-tabs__link> Admin Guide </a> </li> <li class=md-tabs__item> <a href=../../user_guide/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../../admin_api/ class=md-tabs__link> Admin API </a> </li> <li class=md-tabs__item> <a href=../../user_api/latest/ class=md-tabs__link> User API </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="ComputeStacks Documentation" class="md-nav__button md-logo" aria-label="ComputeStacks Documentation"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><defs><style>.fa-secondary{opacity:.4}</style></defs><path class=fa-secondary d="M96 0H32A32 32 0 0 0 0 32v64h128V32A32 32 0 0 0 96 0zM0 384h128V128H0zm0 96a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H0zm513.62-17.78L401.08 42.71l-60.26 16.14 112.35 418.8c.11.39.2.79.29 1.18l60.29-16.15c-.04-.15-.09-.3-.13-.46zM160 480a32 32 0 0 0 32 32h64a32 32 0 0 0 32-32v-64H160zM256 0h-64a32 32 0 0 0-32 32v64h124.79l-8-29.65a23.94 23.94 0 0 1 11.17-27V32A32 32 0 0 0 256 0zm-96 384h128V128H160z"/><path class=fa-primary d="M0 416h128v-32H0zm0-288h128V96H0zm575.17 317.65L460.39 17.78a23.89 23.89 0 0 0-29.18-17h-.09L415.73 5a24 24 0 0 0-16.9 29.36l114.79 427.86a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.35zM160 416h128v-32H160zM338.39 49.78a23.89 23.89 0 0 0-29.18-17h-.09L293.73 37a24 24 0 0 0-16.9 29.36l8 29.65H160v32h128V108l103.62 386.22a23.89 23.89 0 0 0 29.18 17h.09l15.38-4.22a24 24 0 0 0 16.9-29.33z"/></svg> </a> ComputeStacks Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Architecture <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Architecture </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#key-concepts class=md-nav__link> Key Concepts </a> <nav class=md-nav aria-label="Key Concepts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#definitions class=md-nav__link> Definitions </a> </li> <li class=md-nav__item> <a href=#networking class=md-nav__link> Networking </a> </li> <li class=md-nav__item> <a href=#container-storage class=md-nav__link> Container Storage </a> </li> <li class=md-nav__item> <a href=#backups class=md-nav__link> Backups </a> </li> <li class=md-nav__item> <a href=#container-registry class=md-nav__link> Container Registry </a> </li> <li class=md-nav__item> <a href=#metrics class=md-nav__link> Metrics </a> </li> <li class=md-nav__item> <a href=#dns class=md-nav__link> DNS </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#example-configurations class=md-nav__link> Example Configurations </a> <nav class=md-nav aria-label="Example Configurations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#single-node-environment class=md-nav__link> Single-Node Environment </a> </li> <li class=md-nav__item> <a href=#small-cluster class=md-nav__link> Small Cluster </a> </li> <li class=md-nav__item> <a href=#medium-cluster class=md-nav__link> Medium Cluster </a> </li> <li class=md-nav__item> <a href=#multi-region-cluster class=md-nav__link> Multi-Region Cluster </a> </li> <li class=md-nav__item> <a href=#single-region-multi-az class=md-nav__link> Single Region, Multi-AZ </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../notifications/ class=md-nav__link> Notifications </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-4 type=checkbox id=nav-2-4> <label class=md-nav__link for=nav-2-4> Installation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Installation data-md-level=2> <label class=md-nav__title for=nav-2-4> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../installation/0_requirements/ class=md-nav__link> Plan </a> </li> <li class=md-nav__item> <a href=../installation/1_prepare/ class=md-nav__link> Prepare </a> </li> <li class=md-nav__item> <a href=../installation/2_perform/ class=md-nav__link> Run </a> </li> <li class=md-nav__item> <a href=../installation/3_finalize/ class=md-nav__link> Finalize </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-5 type=checkbox id=nav-2-5> <label class=md-nav__link for=nav-2-5> Integrations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Integrations data-md-level=2> <label class=md-nav__title for=nav-2-5> <span class="md-nav__icon md-icon"></span> Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../integrations/webhooks/ class=md-nav__link> WebHooks </a> </li> <li class=md-nav__item> <a href=../integrations/whmcs_plugin/ class=md-nav__link> WHMCS </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Admin Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Admin Guide" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"></span> Admin Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/ class=md-nav__link> Overview </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Billing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Billing data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"></span> Billing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/billing/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_guide/billing/billing_plans/ class=md-nav__link> Billing Plans </a> </li> <li class=md-nav__item> <a href=../../admin_guide/billing/free_trial/ class=md-nav__link> Setup Free Trials </a> </li> <li class=md-nav__item> <a href=../../admin_guide/billing/integrations/ class=md-nav__link> Handle Invoicing & Payments </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Cluster Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Cluster Management" data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"></span> Cluster Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/resource_management/ class=md-nav__link> Resource Management </a> </li> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/change_region_name/ class=md-nav__link> Rename Region </a> </li> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/cs_database/ class=md-nav__link> Controller Database </a> </li> <li class=md-nav__item> <a href=../../admin_guide/cluster_management/load_balancer/ class=md-nav__link> Load Balancer </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> System Administration <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="System Administration" data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"></span> System Administration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/sysadmin/controller_backups/ class=md-nav__link> Controller Backup </a> </li> <li class=md-nav__item> <a href=../../admin_guide/sysadmin/upgrade_agent/ class=md-nav__link> Update Agent </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-5 type=checkbox id=nav-3-5> <label class=md-nav__link for=nav-3-5> Custom Integrations <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Custom Integrations" data-md-level=2> <label class=md-nav__title for=nav-3-5> <span class="md-nav__icon md-icon"></span> Custom Integrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_guide/custom_integration/full_api/ class=md-nav__link> API Only </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> User Guide <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Guide" data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_guide/backups/ class=md-nav__link> Backups </a> </li> <li class=md-nav__item> <a href=../../user_guide/developer-tools/ class=md-nav__link> Developer Tools </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4 type=checkbox id=nav-4-4> <label class=md-nav__link for=nav-4-4> Container Images <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Container Images" data-md-level=2> <label class=md-nav__title for=nav-4-4> <span class="md-nav__icon md-icon"></span> Container Images </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/container_images/elastic-search/ class=md-nav__link> ElasticSearch </a> </li> <li class=md-nav__item> <a href=../../user_guide/container_images/redis/ class=md-nav__link> Redis </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-4-3 type=checkbox id=nav-4-4-3> <label class=md-nav__link for=nav-4-4-3> Wordpress <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Wordpress data-md-level=3> <label class=md-nav__title for=nav-4-4-3> <span class="md-nav__icon md-icon"></span> Wordpress </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/container_images/wordpress/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_guide/container_images/wordpress_apache/ class=md-nav__link> Apache to LiteSpeed </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_guide/container_images/whmcs/ class=md-nav__link> WHMCS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-5 type=checkbox id=nav-4-5> <label class=md-nav__link for=nav-4-5> Core Concepts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Core Concepts" data-md-level=2> <label class=md-nav__title for=nav-4-5> <span class="md-nav__icon md-icon"></span> Core Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/core-concepts/mail/ class=md-nav__link> Sending Mail </a> </li> <li class=md-nav__item> <a href=../../user_guide/core-concepts/ssh/ class=md-nav__link> SSH & File Access </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-6 type=checkbox id=nav-4-6> <label class=md-nav__link for=nav-4-6> How To <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="How To" data-md-level=2> <label class=md-nav__title for=nav-4-6> <span class="md-nav__icon md-icon"></span> How To </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/how-to/building-images/ class=md-nav__link> Building Images </a> </li> <li class=md-nav__item> <a href=../../user_guide/how-to/clone-project/ class=md-nav__link> Cloning Projects </a> </li> <li class=md-nav__item> <a href=../../user_guide/how-to/moving/ class=md-nav__link> Migrating Existing Application </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-7 type=checkbox id=nav-4-7> <label class=md-nav__link for=nav-4-7> Third Party <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Third Party" data-md-level=2> <label class=md-nav__title for=nav-4-7> <span class="md-nav__icon md-icon"></span> Third Party </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_guide/third-party/cloudflare/ class=md-nav__link> Cloudflare </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Admin API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Admin API" data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"></span> Admin API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/container_services/ class=md-nav__link> Container Services </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Billing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Billing data-md-level=2> <label class=md-nav__title for=nav-5-3> <span class="md-nav__icon md-icon"></span> Billing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/billing/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/billing/products/ class=md-nav__link> Products </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/billing/billing_plans/ class=md-nav__link> Billing Plans </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/billing/resources/ class=md-nav__link> Billing Resources </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/billing/phases/ class=md-nav__link> Billing Phases </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/billing/prices/ class=md-nav__link> Resource Prices </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> DNS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=DNS data-md-level=2> <label class=md-nav__title for=nav-5-4> <span class="md-nav__icon md-icon"></span> DNS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/zones/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/zones/collaborators/ class=md-nav__link> Collaborations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Infrastructure <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Infrastructure data-md-level=2> <label class=md-nav__title for=nav-5-5> <span class="md-nav__icon md-icon"></span> Infrastructure </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/infrastructure/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/infrastructure/locations/ class=md-nav__link> Regions </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/infrastructure/regions/ class=md-nav__link> Availability Zones </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/infrastructure/nodes/ class=md-nav__link> Nodes </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-6 type=checkbox id=nav-5-6> <label class=md-nav__link for=nav-5-6> Images <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Images data-md-level=2> <label class=md-nav__title for=nav-5-6> <span class="md-nav__icon md-icon"></span> Images </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/images/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/images/collaborations/ class=md-nav__link> Collaborations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-7 type=checkbox id=nav-5-7> <label class=md-nav__link for=nav-5-7> Networking <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networking data-md-level=2> <label class=md-nav__title for=nav-5-7> <span class="md-nav__icon md-icon"></span> Networking </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/networking/domains/ class=md-nav__link> Domains </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/networking/ingress_rules/ class=md-nav__link> Ingress Rules </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-8 type=checkbox id=nav-5-8> <label class=md-nav__link for=nav-5-8> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=nav-5-8> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/projects/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/projects/collaborators/ class=md-nav__link> Collaborations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-9 type=checkbox id=nav-5-9> <label class=md-nav__link for=nav-5-9> Registry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Registry data-md-level=2> <label class=md-nav__title for=nav-5-9> <span class="md-nav__icon md-icon"></span> Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/registry/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/registry/collaborators/ class=md-nav__link> Collaborations </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-10 type=checkbox id=nav-5-10> <label class=md-nav__link for=nav-5-10> Subscription Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Subscription Management" data-md-level=2> <label class=md-nav__title for=nav-5-10> <span class="md-nav__icon md-icon"></span> Subscription Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/subscriptions/subscriptions/ class=md-nav__link> Subscriptions </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/subscriptions/usage/ class=md-nav__link> Usage </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-11 type=checkbox id=nav-5-11> <label class=md-nav__link for=nav-5-11> User Management <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User Management" data-md-level=2> <label class=md-nav__title for=nav-5-11> <span class="md-nav__icon md-icon"></span> User Management </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../admin_api/latest/users/ class=md-nav__link> Users </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/users/user_groups/ class=md-nav__link> Groups </a> </li> <li class=md-nav__item> <a href=../../admin_api/latest/users/ssh_keys/ class=md-nav__link> SSH Keys </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> User API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="User API" data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"></span> User API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/collaborations/ class=md-nav__link> Collaborators </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/containers/ class=md-nav__link> Containers </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Container Registry <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Container Registry" data-md-level=2> <label class=md-nav__title for=nav-6-4> <span class="md-nav__icon md-icon"></span> Container Registry </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/container_registry/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/container_registry/collaborations/ class=md-nav__link> Collaborators </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-5 type=checkbox id=nav-6-5> <label class=md-nav__link for=nav-6-5> Container Services <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Container Services" data-md-level=2> <label class=md-nav__title for=nav-6-5> <span class="md-nav__icon md-icon"></span> Container Services </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/container_services/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/container_services/metadata/ class=md-nav__link> Metadata </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/container_services/resources/ class=md-nav__link> Resources </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/container_services/ssl/ class=md-nav__link> SSL </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_api/latest/domains/ class=md-nav__link> Domains </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-7 type=checkbox id=nav-6-7> <label class=md-nav__link for=nav-6-7> DNS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=DNS data-md-level=2> <label class=md-nav__title for=nav-6-7> <span class="md-nav__icon md-icon"></span> DNS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/zones/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/zones/collaborations/ class=md-nav__link> Collaborators </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_api/latest/events/ class=md-nav__link> Events </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-9 type=checkbox id=nav-6-9> <label class=md-nav__link for=nav-6-9> Images <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Images data-md-level=2> <label class=md-nav__title for=nav-6-9> <span class="md-nav__icon md-icon"></span> Images </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/images/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/collaborations/ class=md-nav__link> Collaborators </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/providers/ class=md-nav__link> Providers </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-9-4 type=checkbox id=nav-6-9-4> <label class=md-nav__link for=nav-6-9-4> Parameters <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Parameters data-md-level=3> <label class=md-nav__title for=nav-6-9-4> <span class="md-nav__icon md-icon"></span> Parameters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/images/params/env/ class=md-nav__link> Env </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/params/ingress/ class=md-nav__link> Ingress </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/params/relationships/ class=md-nav__link> Relationships </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/params/settings/ class=md-nav__link> Settings </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/images/params/volumes/ class=md-nav__link> Volumes </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_api/latest/load_balancers/ class=md-nav__link> Load Balancers </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/locations/ class=md-nav__link> Locations </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-12 type=checkbox id=nav-6-12> <label class=md-nav__link for=nav-6-12> Networks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Networks data-md-level=2> <label class=md-nav__title for=nav-6-12> <span class="md-nav__icon md-icon"></span> Networks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/network/ class=md-nav__link> Ingress Rules </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../user_api/latest/orders/ class=md-nav__link> Orders </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/products/ class=md-nav__link> Products </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-15 type=checkbox id=nav-6-15> <label class=md-nav__link for=nav-6-15> Profile <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Profile data-md-level=2> <label class=md-nav__title for=nav-6-15> <span class="md-nav__icon md-icon"></span> Profile </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/user/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/user/ssh/ class=md-nav__link> SSH Keys </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-16 type=checkbox id=nav-6-16> <label class=md-nav__link for=nav-6-16> Projects <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Projects data-md-level=2> <label class=md-nav__title for=nav-6-16> <span class="md-nav__icon md-icon"></span> Projects </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/projects/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/projects/collaborations/ class=md-nav__link> Collaborators </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/projects/resources/ class=md-nav__link> Resources </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-17 type=checkbox id=nav-6-17> <label class=md-nav__link for=nav-6-17> Subscriptions <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Subscriptions data-md-level=2> <label class=md-nav__title for=nav-6-17> <span class="md-nav__icon md-icon"></span> Subscriptions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/subscriptions/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/subscriptions/billing_events/ class=md-nav__link> Billing Events </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/subscriptions/usage/ class=md-nav__link> Usage </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-18 type=checkbox id=nav-6-18> <label class=md-nav__link for=nav-6-18> Volumes <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Volumes data-md-level=2> <label class=md-nav__title for=nav-6-18> <span class="md-nav__icon md-icon"></span> Volumes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user_api/latest/volumes/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../user_api/latest/volumes/backup/ class=md-nav__link> Backups </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <h1 id=architecture>Architecture<a class=headerlink href=#architecture title="Permanent link">&para;</a></h1> <p>ComputeStacks is a collection of open-source software, running in a clustered environment. This guide will walk through some of the key components to help you make an informed decision when planning your environment.</p> <p>All servers will use Debian 11.</p> <h2 id=key-concepts>Key Concepts<a class=headerlink href=#key-concepts title="Permanent link">&para;</a></h2> <h3 id=definitions>Definitions<a class=headerlink href=#definitions title="Permanent link">&para;</a></h3> <h4>Controller</h4> <p>The <em>Controller</em> is the primary ComputeStacks software. This manages the orchestration of containers onto the <em>Container Nodes</em>. </p> <h4>Region</h4> <p>A <em>Region</em> is typically a geographic location that is used to group <em>Availability Zones</em>, and their subsequent <em>Container Nodes</em>.</p> <h4>Availability Zone</h4> <p>An <em>Availability Zone (AZ)</em> is a group of <em>Container Nodes</em> within a <em>Region</em>. A single public IP will be shared by all containers running with this AZ.</p> <h4>Container Node</h4> <p><em>Container Nodes</em> are the physical compute resources that will run the containers. They are grouped by <em>Availability Zone</em>, within a single <em>Region</em>.</p> <div class="admonition note"> <p>While the CPU on a node is shared with all containers on the node, you must have enough cores to match the maximum package size you wish to offer. For example, if you wish to sell a 4 core CPU package, then you will need at least 4 CPU Cores available on the node.</p> </div> <h3 id=networking>Networking<a class=headerlink href=#networking title="Permanent link">&para;</a></h3> <h4>Cluster Network</h4> <p>For <a href=#starter-environment>single node</a> configurations, you only need a single public IP per server. However, in general we recommend a private network if possible.</p> <p>For clustered environments, we recommend you create a dedicated private network for inter-node communication. This should not perform any kind of source/destination filtering, otherwise we will need to use an overlay network, which will reduce overall network performance.</p> <h4>Container-To-Container</h4> <p>Each container is given a private IP Address, and by default can only communicate with other containers in the same project. If you choose to allow external connectivity, then our load balancer will forward <code>80/443</code> to your container.</p> <h4>External Connectivity</h4> <p>ComputeStacks supports <code>http</code>, <code>tcp</code>, and <code>udp</code> traffic. With <code>http</code> and <code>tcp</code>, the user has the option to route the traffic through our global load balancer and enable SSL/TLS offloading. (HTTP by default will always route this way).</p> <p>Our load balancer runs on each node in the availability zone, and shares a single floating IP. In the event of a node failure, we use pacemaker &amp; corosync to move that floating IP to another node in the cluster. We maintain the same configuration on each node so that all load balancers are able to serve traffic immediately.</p> <p>Depending on your goals, you may also choose to allocate public IP addresses to each container. Please contact us to discuss this in more detail.</p> <h3 id=container-storage>Container Storage<a class=headerlink href=#container-storage title="Permanent link">&para;</a></h3> <p>Our default configuration is to run our containers using locally-mounted storage volumes. This provides both performance, stability, and cost benefits over shared/clustered storage, and for our typical customer, provides the best fit for their business model.</p> <p>However, we understand that for some deployments it makes sense to have high-availability for your container services. In those use-cases, we can use NFS storage for our container volumes, which would allow your containers to automatically failover to another node.</p> <h3 id=backups>Backups<a class=headerlink href=#backups title="Permanent link">&para;</a></h3> <p>ComputeStacks uses an in-house developed backup solution, built upon the excellent <a href=https://www.borgbackup.org target=_blank>borg</a> backup tool. We include specific backup drivers for MySQL/MariaDB and PostgreSQL that ensure consistent and unobtrusive backups. </p> <p>You will need to provide a separate backup server that will hold your customer&rsquo;s backups. Our installation process will automatically configure a base debian install to serve this function. We also recommend that you <em>do not</em> share a single backup server across multiple regions.</p> <h3 id=container-registry>Container Registry<a class=headerlink href=#container-registry title="Permanent link">&para;</a></h3> <p>ComputeStacks offers an integrated container registry to aid in your customers image development. For small deployments, we will run this on the same server as our controller. However, we recommend that this run on it&rsquo;s own server.</p> <h3 id=metrics>Metrics<a class=headerlink href=#metrics title="Permanent link">&para;</a></h3> <p>As part of our normal installation process, we will configure a dedicated metrics and log aggregation server. This will collect, store, and process logs and metrics from all servers and containers in the cluster. We recommend that you install one metrics server per region. If there is too much latency between the metrics server and the container nodes, alerting and resource usage data could be delayed.</p> <h3 id=dns>DNS<a class=headerlink href=#dns title="Permanent link">&para;</a></h3> <p>ComputeStacks offers an optional DNS interface. You may choose to use our hosted DNS service for free, or deploy your own PowerDNS service. Our ansible installer can provision a replicated PowerDNS setup automatically.</p> <h2 id=example-configurations>Example Configurations<a class=headerlink href=#example-configurations title="Permanent link">&para;</a></h2> <div class="admonition success"> <p>The following configuration examples are for planning purposes only. Please work with our team to design an appropriate architecture to meet your goals.</p> <p>The recommendations below are based on a typical hosting provider&rsquo;s workload. This means that a majority of the containers deployed will be php-based <em>(e.g. wordpress)</em>, and use Redis &amp; MySQL.</p> <p><em>Please see our <a href=../installation/0_requirements/#minimum-server-requirements>installation guide</a> for our minimum requirements.</em></p> </div> <h3 id=single-node-environment>Single-Node Environment<a class=headerlink href=#single-node-environment title="Permanent link">&para;</a></h3> <p>For small hosting providers who are just getting started. This setup will typically support 20 Wordpress sites with average traffic.</p> <div class="admonition abstract"> <p class=admonition-title>Single Region, No Cluster</p> <p><em>Container registry and metrics run on the controller.</em></p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Controller</td> <td>4 Cores</td> <td>8 GB</td> <td>100 GB</td> <td>Single public IP address</td> </tr> <tr> <td>Container Node</td> <td>4 Cores</td> <td>12 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 1</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 2</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <div class="admonition tip"> <p class=admonition-title>All of our cluster examples will require:</p> <ul> <li>A private network shared between all nodes<ul> <li>If possible, disable source/destination filtering. Otherwise you will need to use IP-in-IP.</li> </ul> </li> <li><strong>1 public floating IP <em>Per Availability Zone</em></strong>. If this is not possible, then disable the floating IP in the <code>inventory.yml</code> file and add the IP of the first node as the &ldquo;floating ip&rdquo;. </li> <li>While the controller only needs a single public IP, we generally recommend also giving the controller access to the private network for the nodes and metrics server when possible.</li> </ul> </div> <h3 id=small-cluster>Small Cluster<a class=headerlink href=#small-cluster title="Permanent link">&para;</a></h3> <div class="admonition abstract"> <p class=admonition-title>Single Region</p> <p><em>Container Registry runs on the controller</em></p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Controller</td> <td>4 Cores</td> <td>8 GB</td> <td>100 GB</td> <td>Single public IP address</td> </tr> <tr> <td>Container Node 1</td> <td>4 Cores</td> <td>12 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 2</td> <td>4 Cores</td> <td>12 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 3</td> <td>4 Cores</td> <td>12 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Metrics</td> <td>2 Cores</td> <td>4 GB</td> <td>50 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 1</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 2</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <h3 id=medium-cluster>Medium Cluster<a class=headerlink href=#medium-cluster title="Permanent link">&para;</a></h3> <div class="admonition abstract"> <p class=admonition-title>Medium Cluster</p> <p><em>Container Registry runs on the controller</em></p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Controller</td> <td>4 Cores</td> <td>10 GB</td> <td>100 GB</td> <td>Single public IP address</td> </tr> <tr> <td>Container Node 1</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 2</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 3</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Metrics</td> <td>4 Cores</td> <td>8 GB</td> <td>50 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 1</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 2</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <h3 id=multi-region-cluster>Multi-Region Cluster<a class=headerlink href=#multi-region-cluster title="Permanent link">&para;</a></h3> <div class="admonition abstract"> <p class=admonition-title>Shared Resources</p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Controller</td> <td>6 Cores</td> <td>12 GB</td> <td>100 GB</td> <td>Single public IP address</td> </tr> <tr> <td>Container Registry</td> <td>2 Cores</td> <td>2 GB</td> <td>350 GB</td> <td>Single public IP</td> </tr> <tr> <td>PowerDNS 1</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 2</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <div class="admonition example"> <p class=admonition-title>Region 1</p> <p><em>Private network is just for this AZ</em></p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Container Node 1</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 2</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 3</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Metrics</td> <td>4 Cores</td> <td>8 GB</td> <td>50 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <div class="admonition example"> <p class=admonition-title>Region 2</p> <p><em>Private network is just for this AZ</em></p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Container Node 4</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 5</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 6</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Metrics</td> <td>4 Cores</td> <td>8 GB</td> <td>50 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <h3 id=single-region-multi-az>Single Region, Multi-AZ<a class=headerlink href=#single-region-multi-az title="Permanent link">&para;</a></h3> <div class="admonition note"> <p>You can choose to run the backup server shared between AZ&rsquo;s, or create a dedicated one per-AZ.</p> <p><em>Just note that the private network must be accessible across all AZ&rsquo;s.</em></p> </div> <div class="admonition abstract"> <p class=admonition-title>Shared Resources</p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Controller</td> <td>6 Cores</td> <td>12 GB</td> <td>100 GB</td> <td>Single public IP address</td> </tr> <tr> <td>Container Registry</td> <td>2 Cores</td> <td>2 GB</td> <td>350 GB</td> <td>Single public IP</td> </tr> <tr> <td>Backup Server</td> <td>1 Core</td> <td>1 GB</td> <td>350 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Metrics</td> <td>4 Cores</td> <td>8 GB</td> <td>50 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 1</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>PowerDNS 2</td> <td>1 Core</td> <td>1 GB</td> <td>20 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <div class="admonition example"> <p class=admonition-title>Region 1, AZ 1</p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Container Node 1</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 2</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 3</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <div class="admonition example"> <p class=admonition-title>Region 1, AZ 2</p> <table> <thead> <tr> <th>Server Role</th> <th>CPU</th> <th>Memory</th> <th>Storage</th> <th>Network Notes</th> </tr> </thead> <tbody> <tr> <td>Container Node 4</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 5</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> <tr> <td>Container Node 6</td> <td>12 Cores</td> <td>48 GB</td> <td>150 GB</td> <td>1 public, 1 private</td> </tr> </tbody> </table> </div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class=timeago datetime=2022-04-05T21:29:27+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2022-04-05</span> </small> </div> </article> </div> </div> </main> <!-- Override https://github.com/squidfunk/mkdocs-material/blob/master/material/partials/footer.html --> <script>
    window.Papercups = {
        config: {
            accountId: "21bacdbb-362f-4eb0-86f3-b0d76fc60308",
            title: "Welcome to ComputeStacks",
            subtitle: "Ask us anything in the chat window below 😊",
            primaryColor: "#198fce",
            greeting: "",
            awayMessage: "",
            newMessagePlaceholder: "Start typing...",
            showAgentAvailability: false,
            agentAvailableText: "We're online right now!",
            agentUnavailableText: "We're away at the moment.",
            requireEmailUpfront: true,
            iconVariant: "outlined",
            baseUrl: "https://chat-widget.computestacks.com",
        },
    };
</script> <script type=text/javascript async defer src=https://chat-widget.computestacks.com/widget.js></script> </div> <script src=../../assets/javascripts/vendor.93c04032.min.js></script> <script src=../../assets/javascripts/bundle.83e5331e.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script> <script>
        app = initialize({
          base: "../..",
          features: ['navigation.instant', 'navigation.sections', 'navigation.tabs', 'toc.integrate'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> <script src=../../js/timeago.min.js></script> <script src=../../js/timeago_mkdocs_material.js></script> </body> </html>